{{ $rating := .Params.rating | default 0 }}
{{ $dateFinished := .Params.dateFinished }}
{{ if $dateFinished }}
  {{ $dateFinished = time $dateFinished }}
{{ end }}

<div class="book-card">
  <a href="{{ .Permalink }}" class="book-card-link"></a>

  <div class="book-card-cover">
    {{ if .Params.cover }}
    <img src="{{ .Params.cover }}" alt="{{ .Title }}" loading="lazy" decoding="async">
    {{ else }}
    <div class="cover-placeholder">ðŸ“–</div>
    {{ end }}
  </div>

  <div class="book-card-content">
    <h3 class="book-card-title">{{ .Title }}</h3>

    <div class="book-card-rating">
      <span class="rating-label">ä¸ªäººè¯„åˆ†ï¼š</span>
      <div class="stars">
        <span class="star{{ if ge $rating 1 }} filled{{ end }}">â˜…</span>
        <span class="star{{ if ge $rating 2 }} filled{{ end }}">â˜…</span>
        <span class="star{{ if ge $rating 3 }} filled{{ end }}">â˜…</span>
        <span class="star{{ if ge $rating 4 }} filled{{ end }}">â˜…</span>
        <span class="star{{ if ge $rating 5 }} filled{{ end }}">â˜…</span>
      </div>
    </div>

    {{ if .Params.summary }}
    <p class="book-card-summary">{{ .Params.summary }}</p>
    {{ else }}
    <p class="book-card-summary">{{ .Summary }}</p>
    {{ end }}

    <div class="book-card-meta">
      {{ if .Params.author }}
      <span class="meta-item">{{ .Params.author }}</span>
      {{ end }}
      {{ if $dateFinished }}
      <span class="meta-item">{{ $dateFinished.Format "2006-01" }}</span>
      {{ end }}
      {{ with .Params.readingTime }}
      <span class="meta-item">{{ . }}</span>
      {{ end }}
    </div>
  </div>

  <div class="book-card-type">BOOK</div>
</div>
